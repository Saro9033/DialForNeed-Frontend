import{l as T,v as z,k as R,n as c,ar as q,ap as G,ak as W,aV as H,bi as J,a6 as L,bj as V,r as o,as as $,aO as B,bk as S,al as K,a9 as M,bl as Q,j as s,H as C,J as D,bf as U,bm as X}from"./index-VLfZ_LXD.js";import{G as Y}from"./mdbreact.esm-DvacgDJ9.js";const es=()=>{var y,E,v;const{id:h}=T(),r=z(),{enqueueSnackbar:l}=R(),e=c(q),j=c(G),x=c(W),O=c(H),p=c(J),u=c(L),d=c(V),[w,b]=o.useState(null),[f,g]=o.useState("");o.useEffect(()=>{r($(h)),r(B()),r(S())},[r,h]),o.useEffect(()=>{x&&l(x,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{r(K())}}),u&&l(u,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{r(M())}}),p&&(l("Task Assigned Successfully!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{r(Q())}}),r(S()))},[p,x,u,l,r]);const F=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),_=a=>{b(a)},A=a=>{r(X({id:h,taskData:{orderItemId:a,employeeId:f}})),b(null),g("")},P=()=>{var m;const a={columns:[{label:"Product",field:"product",sort:"asc"},{label:"Price",field:"price",sort:"asc"},{label:"Type",field:"type",sort:"asc"},{label:"Employee",field:"employee",sort:"asc"},{label:"Status",field:"status",sort:"asc"},{label:"Actions",field:"actions",sort:"asc"}],rows:[]};return(m=e==null?void 0:e.orderItems)==null||m.forEach(t=>{var I,k;const N=w===t._id,i=d==null?void 0:d.find(n=>n.orderItem===t._id);console.log(d),console.log(i),a.rows.push({product:s.jsxs(s.Fragment,{children:[s.jsx("img",{width:"50",src:(I=t.productId.images[0])==null?void 0:I.image,alt:""}),s.jsx("br",{}),s.jsxs("span",{className:"text-secondary",style:{fontSize:"14px"},children:[t.productId.name,"Â (",t.quantity,"x)"]})]}),price:F(t.productId.price),type:(k=t.productId)==null?void 0:k.type,employee:s.jsx(s.Fragment,{children:N?s.jsxs("select",{value:f,onChange:n=>g(n.target.value),children:[s.jsx("option",{disabled:!0,value:"",children:"Select"}),O.map(n=>s.jsx("option",{value:n._id,children:n.name},n._id))]}):s.jsx("span",{children:i?i==null?void 0:i.employee.name:"Select"})}),status:s.jsx(s.Fragment,{children:t.status.includes("pending")||t.status.includes("Pending")?s.jsx("span",{className:"text-danger",style:{fontSize:"14px",fontWeight:"600"},children:t.status}):s.jsx("span",{className:"text-success",style:{fontSize:"14px",fontWeight:"600"},children:t.status})}),actions:s.jsx(s.Fragment,{children:N?s.jsx("button",{className:"btn btn-primary",onClick:()=>A(t._id),children:"Assign"}):s.jsx("button",{className:"btn btn-primary",onClick:()=>_(t._id),children:s.jsx(U,{})})})})}),a};return s.jsx("div",{className:"container",children:s.jsxs("div",{className:"row mt-5 d-flex justify-content-between mb-5",children:[s.jsx("div",{className:"col-12 col-lg-12 mb-4 order-confirm",children:j==="loading"?s.jsx("div",{className:"d-flex align-items-start justify-content-center",children:s.jsx("div",{className:"loader"})}):j==="succeeded"&&((y=e==null?void 0:e.orderItems)==null?void 0:y.length)===0?s.jsx("h1",{children:"No Orders Placed"}):s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"mt-4",children:s.jsx(D,{children:s.jsx("h2",{children:"Orders"})})}),s.jsx(C,{children:s.jsx(D,{children:s.jsx("div",{className:"table-responsive",children:s.jsx(Y,{className:"px-3",bordered:!0,striped:!0,hover:!0,style:{justifyContent:"center"},searching:!1,responsive:!0,data:P()})})})})]})}),s.jsx("div",{className:"col-12 col-lg-6",children:e&&e.user&&s.jsxs("div",{id:"order_summary",children:[s.jsx("h4",{children:`${(E=e.user)==null?void 0:E.name}'s Details`}),s.jsx("hr",{}),s.jsx("table",{className:"table",children:s.jsxs("tbody",{children:[((v=e.user)==null?void 0:v.avatar)&&s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"text-center",children:s.jsx("img",{src:e.user.avatar,style:{borderRadius:"50%"},className:"border",alt:e.user.name,width:"100",height:"100"})})}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Order ID"})}),s.jsxs("td",{children:[": ",e._id]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Order Date"})}),s.jsxs("td",{children:[": ",new Date(e.createdAt).toLocaleDateString()]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Total Amount"})}),s.jsxs("td",{children:[": ",e.totalPrice]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Name"})}),s.jsxs("td",{children:[": ",e.user.name]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Email"})}),s.jsxs("td",{children:[": ",e.user.email]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Phone Number"})}),s.jsxs("td",{children:[": ",e.user.phoneNumber]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Address"})}),s.jsxs("td",{children:[": ",e.user.address,", ",e.user.city,", ",e.user.country,", ",e.user.postalCode]})]})]})}),s.jsx("hr",{})]})})]})})};export{es as default};

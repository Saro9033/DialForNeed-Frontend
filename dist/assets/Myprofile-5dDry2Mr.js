import{k as O,n as i,s as R,Z as $,_ as q,z as K,r as n,v as V,$ as W,a0 as Z,a1 as _,j as e,M as J,a2 as Q,a3 as w,L as a,K as N,a4 as X}from"./index-VLfZ_LXD.js";import{M as r}from"./Modal-BoySAo34.js";const se=()=>{const{enqueueSnackbar:d}=O(),s=i(R),m=i($),x=i(q),S=window.innerWidth<850,o=i(K),[A,j]=n.useState(!1),h=()=>j(!1),E=()=>j(!0),[p,L]=n.useState(s==null?void 0:s.name),[v,P]=n.useState(s==null?void 0:s.email),[y,I]=n.useState(s==null?void 0:s.address),[u,k]=n.useState(s==null?void 0:s.phoneNumber),[b,G]=n.useState(s==null?void 0:s.postalCode),[g,M]=n.useState(s==null?void 0:s.city),[f,D]=n.useState(s==null?void 0:s.country),[F,U]=n.useState(""),[z,H]=n.useState(s==null?void 0:s.avatar),c=V(),T=t=>{const l=new FileReader;l.onload=()=>{l.readyState===2&&(H(l.result),U(t.target.files[0]))},l.readAsDataURL(t.target.files[0])},B=t=>{t.preventDefault();let l=new FormData;l.append("name",p),l.append("email",v),l.append("phoneNumber",u),l.append("address",y),l.append("postalCode",b),l.append("city",g),l.append("country",f),l.append("avatar",F),c(X(l))},C=W();return n.useEffect(()=>{if(m){d("Profile updated successfully!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{c(Z())}});return}x&&d(x,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{c(_())}}),(!o&&(s==null?void 0:s.role)==="user"||!o&&(s==null?void 0:s.role)==="employee")&&(console.log(o),C("/"))},[m,s,x,o,c,d,C]),e.jsxs("div",{class:"container ",style:{minHeight:"100vh",marginTop:S?"15px":"10px"},children:[e.jsx(J,{title:"My profile"}),e.jsx("div",{class:"main-body",children:e.jsxs("div",{class:"row",children:[e.jsx("div",{class:`${(s==null?void 0:s.role)==="employee"?"col-lg-12":"col-lg-4"}`,children:e.jsx("div",{class:"card",children:e.jsxs("div",{class:"card-body",children:[e.jsxs("div",{class:"d-flex flex-column align-items-center text-center",children:[e.jsx("img",{src:(s==null?void 0:s.avatar)||Q,alt:"Admin",style:{objectFit:"cover",width:"100px",height:"100px"},class:"rounded-circle p-1 bg-primary"}),e.jsxs("div",{class:"mt-3",children:[e.jsx("h4",{children:s==null?void 0:s.name}),e.jsx("p",{class:"text-secondary mb-1",children:s==null?void 0:s.email}),(s==null?void 0:s.role)==="employee"&&e.jsx("p",{class:"text-secondary mb-1",children:s==null?void 0:s.phoneNumber}),(s==null?void 0:s.role)!=="employee"?e.jsx("div",{className:"d-flex w-100 align-items-center justify-content-around",children:e.jsx(w,{to:"/my-orders",className:"w-100 mt-2 btn btn-outline-primary",children:"Orders"})}):e.jsx("div",{className:"d-flex w-100 align-items-center justify-content-around",children:e.jsx(w,{to:"/my-tasks",className:"w-100 mt-2 btn btn-outline-primary",children:"Tasks"})})]})]}),e.jsx("hr",{class:"my-4"})]})})}),(s==null?void 0:s.role)!=="employee"&&e.jsx("div",{class:"col-lg-8",children:e.jsx("div",{class:"card",children:e.jsxs("div",{class:"card-body",children:[e.jsxs("div",{class:"row mb-3",children:[e.jsx("div",{class:"col-sm-3",children:e.jsx("h6",{class:"mb-0",children:"Phone"})}),e.jsx("div",{class:"col-sm-9 text-secondary",children:e.jsx("input",{type:"text",class:"form-control",value:s==null?void 0:s.phoneNumber})})]}),e.jsxs("div",{class:"row mb-3",children:[e.jsx("div",{class:"col-sm-3",children:e.jsx("h6",{class:"mb-0",children:"Address"})}),e.jsx("div",{class:"col-sm-9 text-secondary",children:e.jsx("input",{type:"text",class:"form-control",value:s==null?void 0:s.address})})]}),e.jsxs("div",{class:"row mb-3",children:[e.jsx("div",{class:"col-sm-3",children:e.jsx("h6",{class:"mb-0",children:"Postal Code"})}),e.jsx("div",{class:"col-sm-9 text-secondary",children:e.jsx("input",{type:"text",class:"form-control",value:s==null?void 0:s.postalCode})})]}),e.jsxs("div",{class:"row mb-3",children:[e.jsx("div",{class:"col-sm-3",children:e.jsx("h6",{class:"mb-0",children:"City"})}),e.jsx("div",{class:"col-sm-9 text-secondary",children:e.jsx("input",{type:"text",class:"form-control",value:s==null?void 0:s.city})})]}),e.jsxs("div",{class:"row mb-3",children:[e.jsx("div",{class:"col-sm-3",children:e.jsx("h6",{class:"mb-0",children:"Country"})}),e.jsx("div",{class:"col-sm-9 text-secondary",children:e.jsx("input",{type:"text",class:"form-control",value:s==null?void 0:s.country})})]}),e.jsxs("div",{class:"row",children:[e.jsx("div",{class:"col-sm-3"}),e.jsx("div",{class:"col-sm-9 text-secondary",children:e.jsx("button",{onClick:E,class:"btn btn-primary px-4",children:"Edit Profile"})})]})]})})})]})}),e.jsxs(r,{show:A,onHide:h,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(r.Header,{closeButton:!0,children:e.jsx(r.Title,{children:"Edit Profile"})}),e.jsxs(a,{onSubmit:B,children:[e.jsxs(r.Body,{children:[e.jsx("div",{className:"personal-image",children:e.jsxs("label",{className:"label",children:[e.jsx("input",{type:"file",name:"avatar"}),e.jsxs("figure",{className:"personal-figure",children:[e.jsx("img",{onChange:T,src:z,className:"personal-avatar",alt:"avatar"}),e.jsx("figcaption",{className:"personal-figcaption",children:e.jsx("img",{src:"https://raw.githubusercontent.com/ThiagoLuizNunes/angular-boilerplate/master/src/assets/imgs/camera-white.png",alt:"camera icon"})})]})]})}),e.jsxs(a.Group,{controlId:"formName",children:[e.jsx(a.Label,{children:"Full Name"}),e.jsx(a.Control,{onChange:t=>L(t.target.value),type:"text",value:p})]})," ",e.jsx("br",{}),e.jsxs(a.Group,{controlId:"formEmail",children:[e.jsx(a.Label,{children:"Email address"}),e.jsx(a.Control,{onChange:t=>P(t.target.value),type:"email",value:v})]})," ",e.jsx("br",{}),e.jsxs(a.Group,{controlId:"formPhoneNumber",children:[e.jsx(a.Label,{children:"Phone Number"}),e.jsx(a.Control,{onChange:t=>k(t.target.value),type:"text",value:u})]})," ",e.jsx("br",{}),e.jsxs(a.Group,{controlId:"formAddress",children:[e.jsx(a.Label,{children:"Address"}),e.jsx(a.Control,{onChange:t=>I(t.target.value),type:"text",value:y})]})," ",e.jsx("br",{}),e.jsxs(a.Group,{controlId:"formPostalCode",children:[e.jsx(a.Label,{children:"Postal Code"}),e.jsx(a.Control,{onChange:t=>G(t.target.value),type:"text",value:b})]})," ",e.jsx("br",{}),e.jsxs(a.Group,{controlId:"formCity",children:[e.jsx(a.Label,{children:"City"}),e.jsx(a.Control,{onChange:t=>M(t.target.value),type:"text",value:g})]})," ",e.jsx("br",{}),e.jsxs(a.Group,{controlId:"formCountry",children:[e.jsx(a.Label,{children:"Country"}),e.jsx(a.Control,{onChange:t=>D(t.target.value),type:"text",value:f})]})," ",e.jsx("br",{})]}),e.jsxs(r.Footer,{children:[e.jsx(N,{variant:"danger",onClick:h,children:"Close"}),e.jsx(N,{variant:"primary",type:"submit",onClick:h,children:"Save Changes"})]})]})]})]})};export{se as default};

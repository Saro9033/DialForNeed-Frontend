import{r as l,n,aV as H,bU as R,bV as V,bW as J,bX as K,bY as O,bZ as W,v as X,k as Y,b_ as Z,b$ as $,aO as y,c0 as Q,c1 as ee,j as e,bc as se,H as te,J as ae,L as t,K as g,bf as le,bg as re,c2 as oe,c3 as ne,c4 as ce,c5 as de}from"./index-VLfZ_LXD.js";import{G as ie}from"./mdbreact.esm-DvacgDJ9.js";import{M as u}from"./Modal-BoySAo34.js";const he=()=>{const[q,h]=l.useState(!1),[x,j]=l.useState(!1),[A,S]=l.useState(""),[f,c]=l.useState(""),[E,d]=l.useState(""),[I,w]=l.useState(""),[v,i]=l.useState(""),[C,m]=l.useState(""),b=n(H),r=n(R),F=n(V),N=n(J),D=n(K),U=n(O),T=n(W),a=X(),{enqueueSnackbar:p}=Y();l.useEffect(()=>{N&&(p(N,{variant:"error"}),a(Z())),D&&(p("New Employee Created!",{variant:"success"}),a($()),a(y())),T&&(p("Employee Updated",{variant:"success"}),a(Q()),a(y())),U&&(p("Employee Deleted",{variant:"success"}),a(ee()),a(y())),a(y())},[a,N,p,T,D,U]),l.useEffect(()=>{r&&(S(r._id??""),c(r.name??""),d(r.email??""),i(r.phoneNumber??""),m(r.employeeType??""))},[r]);const B=s=>{j(!0),h(!0),a(ce(s))},G=s=>{window.confirm("Are you sure you want to delete this Employee?")&&a(de(s))},L=()=>{const s={columns:[{label:"Name",field:"name",sort:"asc"},{label:"Number",field:"number",sort:"asc"},{label:"Type",field:"type",sort:"asc"},{label:"Actions",field:"actions",sort:"asc"}],rows:[]};return b&&b.length>0?b.forEach(o=>{s.rows.push({name:e.jsxs(e.Fragment,{children:[o.name,e.jsx("br",{}),e.jsxs("span",{className:"text-secondary",style:{fontSize:"14px"},children:["(",o.email,")"]})]}),number:o.phoneNumber,type:o.employeeType,actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(o._id),className:"btn btn-primary",children:e.jsx(le,{})}),"    ",e.jsx("button",{onClick:()=>G(o._id),className:"btn btn-danger",children:e.jsx(re,{})})]})})}):console.log("No employees found."),s},P=s=>{s.preventDefault(),a(oe({name:f,email:E,password:I,phoneNumber:v,employeeType:C})),c(""),d(""),w(""),i(""),m("")},M=s=>{s.preventDefault(),a(ne({id:A,obj:{name:f,email:E,phoneNumber:v,employeeType:C}})).then(()=>{S(""),c(""),d(""),i(""),m(""),j(!1),h(!1)}).catch(z=>{console.error("Failed to update employee:",z)})},k=()=>{h(!1),j(!1)},_=()=>{c(""),d(""),i(""),m(""),h(!0)};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Employees"}),e.jsx("div",{className:"mt-4 mx-2 d-flex justify-content-between",children:e.jsx("div",{children:e.jsxs("button",{variant:"primary",onClick:_,className:"btn btn-primary",children:["Add ",e.jsx(se,{fontSize:"1.5rem"})]})})})]}),F==="loading"?e.jsx("div",{className:"d-flex align-items-start justify-content-center",children:e.jsx("div",{className:"loader"})}):F==="succeeded"&&b.length===0?e.jsx("h6",{className:"mt-3",children:"No Employees Placed"}):e.jsx(e.Fragment,{children:e.jsx(te,{children:e.jsx(ae,{children:e.jsx("div",{className:"table-responsive",children:e.jsx(ie,{className:"px-3",bordered:!0,striped:!0,hover:!0,searching:!1,responsive:!0,data:L()})})})})}),e.jsxs(u,{show:q,onHide:k,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(u.Header,{closeButton:!0,children:e.jsx(u.Title,{id:"contained-modal-title-vcenter",children:x?e.jsx("p",{children:"Update Employee "}):e.jsx("p",{children:"Create New Employee "})})}),e.jsxs(t,{onSubmit:x?M:P,children:[e.jsxs(u.Body,{children:[e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(t.Label,{children:"Name"}),e.jsx(t.Control,{required:!0,onChange:s=>c(s.target.value),value:f,type:"text",placeholder:"Enter employee name"})]}),e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput2",children:[e.jsx(t.Label,{children:"Email Id"}),e.jsx(t.Control,{required:!0,onChange:s=>d(s.target.value),value:E,type:"email",placeholder:"Enter employee Email Id"})]}),!x&&e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput4",children:[e.jsx(t.Label,{children:"Password"}),e.jsx(t.Control,{required:!0,onChange:s=>w(s.target.value),value:I,type:"password",placeholder:"Enter employee password"})]}),e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput3",children:[e.jsx(t.Label,{children:"Phone Number"}),e.jsx(t.Control,{required:!0,onChange:s=>i(s.target.value),value:v,type:"text",placeholder:"Enter employee Phone number"})]}),e.jsx(t.Label,{children:"Select Employee Type"}),e.jsxs(t.Select,{required:!0,onChange:s=>m(s.target.value),value:C,"aria-label":"Default select example",children:[e.jsx("option",{children:"Select"}),e.jsx("option",{value:"sales",children:"Sales"}),e.jsx("option",{value:"service",children:"Service"})]})]}),e.jsxs(u.Footer,{children:[x?e.jsx(g,{type:"submit",className:"btn btn-primary",children:"Update"}):e.jsx(g,{type:"submit",className:"btn btn-primary",children:"Submit"}),e.jsx(g,{type:"button",className:"btn btn-danger",onClick:k,children:"Close"})]})]})]})]})};export{he as Employees,he as default};

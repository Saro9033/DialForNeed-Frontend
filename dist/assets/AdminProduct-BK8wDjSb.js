import{k as De,v as Pe,n as o,P as ke,Q as Ee,U as Fe,p as Ue,o as Te,q as Be,b4 as Ae,b5 as Le,b6 as ze,aT as Ge,b7 as Re,aU as He,b8 as Me,r,aJ as g,aM as $e,aN as qe,b9 as Je,ba as Ke,bb as Oe,w as me,j as e,K as U,bc as Qe,L as n,bd as Ve,be as We,bf as Xe,bg as Ye,bh as Ze,x as es}from"./index-VLfZ_LXD.js";import{G as ss}from"./mdbreact.esm-DvacgDJ9.js";import{M as c}from"./Modal-BoySAo34.js";import{S as T}from"./Spinner-BwKTpPwQ.js";const ns=()=>{const{enqueueSnackbar:m}=De(),l=Pe(),x=o(ke),pe=o(Ee),j=o(Fe),B=o(Ue),t=o(Te)||{},b=o(Be),A=o(Ae),L=o(Le),z=o(ze),h=o(Ge),he=o(Re),p=o(He),G=o(Me),[ge,v]=r.useState(!1),[fe,R]=r.useState(!1),[H,M]=r.useState(""),[$,q]=r.useState(""),[J,K]=r.useState(""),[O,Q]=r.useState(""),[V,W]=r.useState(""),[X,Y]=r.useState(""),[Z,ee]=r.useState(0),[y,S]=r.useState([]),[N,C]=r.useState([]),[se,I]=r.useState(""),[ae,_]=r.useState(""),[te,re]=r.useState(""),[le,w]=r.useState(""),[ne,D]=r.useState(""),[ie,P]=r.useState(""),[oe,k]=r.useState(0),[de,ce]=r.useState([]),[E,f]=r.useState([]),[F,xe]=r.useState([]);r.useEffect(()=>{l(g()),l($e()),l(qe())},[l]),console.log(h);const je=s=>{C(N.filter((a,i)=>i!==s)),S(y.filter((a,i)=>i!==s))},ue=()=>{I(""),_(""),re(""),w(""),D(""),P(""),k(0),ce([]),f([]),R(!1)},be=s=>{s.preventDefault();let a=new FormData;a.append("name",H),a.append("price",$),a.append("description",J),a.append("categoryId",O),a.append("brandId",V),a.append("type",X),a.append("stock",Z),y.length>0&&y.forEach(i=>{a.append("images",i)}),l(Ve(a))},ve=s=>{s.preventDefault();let a=new FormData;a.append("name",se),a.append("price",ae),a.append("description",te),a.append("categoryId",le),a.append("brandId",ne),a.append("type",ie),a.append("stock",oe),F.length>0&&a.append("imagesToDelete",JSON.stringify(F)),de.length>0&&de.forEach(i=>{a.append("images",i)}),l(We({id:t==null?void 0:t._id,formData:a}))};r.useEffect(()=>{A&&(m("Product Created Successfully!",{variant:"success"}),v(!1),ye(),l(Je()),l(g())),z&&(m("Product Deleted Successfully!",{variant:"success"}),l(Ke()),l(g())),L&&(m("Product Updated Successfully!",{variant:"success"}),ue(),l(Oe()),l(g())),b&&(m(b,{variant:"error"}),l(me())),j&&(m(j,{variant:"error"}),l(me()))},[A,z,L,b,j,l,m]);const ye=()=>{M(""),q(""),K(""),Q(""),W(""),Y(""),ee(0),S([]),C([])},Se=s=>{window.confirm("Are you sure you want to delete this product?")&&(l(Ze(s)),l(g()))},Ne=s=>{R(!0),l(es(s))},Ce=()=>{const s={columns:[{label:"Name",field:"name",sort:"asc"},{label:"Price",field:"price",sort:"asc"},{label:"Stock",field:"stock",sort:"asc"},{label:"Category",field:"category",sort:"asc"},{label:"Brand",field:"brand",sort:"asc"},{label:"Type",field:"type",sort:"asc"},{label:"Action",field:"actions",sort:"asc"}],rows:[]};return x&&x.length>0&&x.forEach(a=>{s.rows.push({name:e.jsxs(e.Fragment,{children:[a.name,e.jsx("br",{}),e.jsxs("span",{className:"text-secondary",style:{fontSize:"14px"},children:["(",a._id,")"]})]}),price:`₹${a.price}`,stock:a.stock,category:a.category,brand:a.brand,type:a.type,actions:e.jsxs(e.Fragment,{children:[e.jsx(U,{variant:"info",size:"sm",className:"mr-2",onClick:()=>Ne(a._id),children:e.jsx(Xe,{})}),e.jsx(U,{variant:"danger",size:"sm",onClick:()=>Se(a._id),children:e.jsx(Ye,{})})]})})}),s},Ie=s=>{s.preventDefault();const a=Array.from(s.target.files);a.length>0&&a.forEach(i=>{const d=new FileReader;d.onload=()=>{d.readyState==2&&(C(u=>[...u,d.result]),S(u=>[...u,i]))},d.readAsDataURL(i)})},_e=s=>{const a=Array.from(s.target.files);a.length>0&&a.forEach(i=>{ce(u=>[...u,i]);const d=new FileReader;d.onload=()=>{d.readyState===2&&f(u=>[...u,d.result])},d.readAsDataURL(i)})};r.useEffect(()=>{var s;if(t){I((t==null?void 0:t.name)??""),_((t==null?void 0:t.price)??""),re((t==null?void 0:t.description)??""),w((t==null?void 0:t.categoryId)??""),D((t==null?void 0:t.brandId)??""),P((t==null?void 0:t.type)??""),k((t==null?void 0:t.stock)??"");let a=[];((s=t==null?void 0:t.images)==null?void 0:s.length)>0&&(t==null||t.images.forEach(i=>{a.push(i.image)})),f(a)}},[t]);const we=s=>{xe([...F,s]),f(E.filter(a=>a!==s))};return e.jsxs("div",{children:[e.jsx("h2",{children:"Products"}),e.jsx(e.Fragment,{children:pe==="loading"?e.jsxs("div",{className:"d-flex align-items-start justify-content-center",children:[e.jsx("div",{className:"loader"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" px-3 my-2 d-flex align-items-start justify-content-start",children:e.jsxs(U,{variant:"primary",onClick:()=>v(!0),children:["ADD   ",e.jsx(Qe,{fontSize:"1.5rem"})]})}),e.jsx(ss,{className:"px-3",bordered:!0,striped:!0,hover:!0,responsive:!0,data:Ce()})]})}),e.jsxs(c,{show:ge,onHide:()=>v(!1),size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{id:"contained-modal-title-vcenter",children:"Create New Product"})}),e.jsx(c.Body,{children:e.jsx("div",{className:"px-2",children:e.jsx("div",{children:e.jsxs("form",{encType:"multipart/form-data",onSubmit:be,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Images"}),e.jsxs("div",{className:"custom-file",children:[e.jsx("input",{type:"file",name:"product_images",className:"custom-file-input",id:"customFile",height:"50",width:"100",multiple:!0,onChange:Ie}),e.jsx("label",{className:"custom-file-label",for:"customFile",children:"Choose Images"})]}),e.jsxs("div",{className:"d-flex ",children:[N.length>0&&N.map((s,a)=>e.jsxs("div",{className:"mt-3 mr-5 position-relative",children:[e.jsx("img",{src:s,className:"border",alt:`image  Preview${a}`,height:"65",width:"65"},a),e.jsx("button",{variant:"danger",className:"border btn btn-secondary rounded-circle position-absolute top-0 right-0 py-0 px-2",size:"md",onClick:()=>je(a),children:"×"})]},a))," "]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name_field",children:"Name"}),e.jsx("input",{type:"text",id:"name_field",className:"form-control",value:H,onChange:s=>M(s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"price_field",children:"Price"}),e.jsx("input",{type:"text",id:"price_field",className:"form-control",value:$,onChange:s=>q(s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"description_field",children:"Description"}),e.jsx("textarea",{value:J,onChange:s=>K(s.target.value),className:"form-control",id:"description_field",rows:"8"})]}),e.jsxs(n.Group,{controlId:"category_field",className:"mb-3",children:[e.jsx(n.Label,{children:"Category"}),e.jsxs(n.Control,{as:"select",value:O,onChange:s=>Q(s.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Select "}),h.length>0?h.map(s=>e.jsx("option",{value:s._id,children:s.title},s._id)):e.jsx("option",{disabled:!0,children:"No categories found"})]})]}),e.jsxs(n.Group,{controlId:"category_field",className:"mb-3",children:[e.jsx(n.Label,{children:"Brand"}),e.jsxs(n.Control,{as:"select",value:V,onChange:s=>W(s.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Select "}),G==="loading"?e.jsx(T,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):p.length>0&&(p==null?void 0:p.map(s=>e.jsx("option",{value:s._id,children:s.title},s._id)))]})]}),e.jsxs(n.Group,{controlId:"category_field",className:"mb-3",children:[e.jsx(n.Label,{children:"Type"}),e.jsxs(n.Control,{as:"select",value:X,onChange:s=>Y(s.target.value),children:[e.jsx("option",{value:"",children:"Select "}),e.jsx("option",{value:"sales",children:"Sales "}),e.jsx("option",{value:"service",children:"Service "})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"stock_field",children:"Stock"}),e.jsx("input",{type:"number",id:"stock_field",className:"form-control",value:Z,onChange:s=>ee(s.target.value)})]}),e.jsx("button",{id:"login_button",type:"submit",className:"btn btn-block py-3 border",disabled:B==="loading",children:"CREATE"})]})})})})]}),e.jsxs(c,{show:fe,onHide:ue,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{id:"contained-modal-title-vcenter",children:"Update Product"})}),e.jsx(c.Body,{children:e.jsx("div",{className:"px-2",children:e.jsx("div",{children:e.jsxs("form",{encType:"multipart/form-data",onSubmit:ve,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Images"}),e.jsxs("div",{className:"custom-file",children:[e.jsx("input",{type:"file",name:"product_images",className:"custom-file-input",id:"customFile",height:"50",width:"100",multiple:!0,onChange:_e}),e.jsx("label",{className:"custom-file-label",for:"customFile",children:"Choose Images"})]}),e.jsx("div",{className:"d-flex align-items-center",children:E.length>0&&E.map((s,a)=>e.jsxs("div",{className:"mt-3 mr-5 position-relative",children:[e.jsx("img",{src:s,className:"border",alt:`image  Preview${a}`,height:"65",width:"65"},a),e.jsx("button",{type:"button",variant:"danger",className:"border btn btn-secondary rounded-circle position-absolute top-0 right-0 py-0 px-2",size:"md",onClick:()=>we(s),children:"×"})]},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"name_field",children:"Name"}),e.jsx("input",{type:"text",id:"name_field",className:"form-control",value:se,onChange:s=>I(s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"price_field",children:"Price"}),e.jsx("input",{type:"text",id:"price_field",className:"form-control",value:ae,onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"description_field",children:"Description"}),e.jsx("textarea",{value:te,onChange:s=>setUpdateDesciption(s.target.value),className:"form-control",id:"description_field",rows:"8"})]}),e.jsxs(n.Group,{controlId:"category_field",className:"mb-3",children:[e.jsx(n.Label,{children:"Category"}),e.jsxs(n.Control,{as:"select",value:le,onChange:s=>w(s.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Select "}),he==="loading"?e.jsx(T,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):e.jsxs(e.Fragment,{children:["  ",h.length>0&&h.map(s=>e.jsx("option",{value:s._id,children:s.title},s._id))]})]})]}),e.jsxs(n.Group,{controlId:"category_field",className:"mb-3",children:[e.jsx(n.Label,{children:"Brand"}),e.jsxs(n.Control,{as:"select",value:ne,onChange:s=>D(s.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Select "}),G==="loading"?e.jsx(T,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):p.length>0&&p.map(s=>e.jsx("option",{value:s._id,children:s.title},s._id))]})]}),e.jsxs(n.Group,{controlId:"category_field",className:"mb-3",children:[e.jsx(n.Label,{children:"Product Type"}),e.jsxs(n.Control,{as:"select",value:ie,onChange:s=>P(s.target.value),children:[e.jsx("option",{value:"",children:"Select "}),e.jsx("option",{value:"sales",children:"Sales "}),e.jsx("option",{value:"service",children:"Service "})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"stock_field",children:"Stock"}),e.jsx("input",{type:"number",id:"stock_field",className:"form-control",value:oe,onChange:s=>k(s.target.value)})]}),e.jsx("button",{id:"login_button",type:"submit",className:"btn btn-block py-3 border",disabled:B==="loading",children:"UPDATE"})]})})})})]})]})};export{ns as AdminProduct,ns as default};
